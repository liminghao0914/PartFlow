<!DOCTYPE html>
<!-- saved from url=(0053)http://echarts.caixin.com/doc/example/www2/index.html -->
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ECharts</title>
</head>
<body>
<script src="echarts.min.js"></script>
<div id="main" style="width:100%;height:auto;">
    <script type="text/javascript">
     var myChart = echarts.init(document.getElementById('main'));
function getData(data){
    // 填入数据
    this.autoHeight = data.data.length * 22 + 320;
    if(this.autoHeight<500){
    this.autoHeight = 500
    }
    myChart.resize({height:this.autoHeight});
    myChart.hideLoading();
    myChart.setOption({
    tooltip: {
        trigger: 'item',
        formatter: '{b}:{d}%'
    },
    color:data.color,
    legend: {
        orient: 'vertical',
        left: '10',
        right:'10',
        top: 320,
        itemWidth:20,
        itemHeight:20,
        textStyle:{
        fontSize: '14',
        color: '#333333'
        },
        formatter:function (name) {
        num = 0;
        isData = false
        data.data.forEach(function(value,i){
        if(value.name==name){
        num = i;
        isData = true
        }
        });
        if(!isData){
        num = 0;
        data.sort.forEach(function(value,i){
        if(value.name==name){
        num = i;
        }
        });
        }
        if(name=="无"){
        name = "默认"
        }
        if(name=="None"){
        name =  "Default"
         }

     if (name.length > 6) {
      name = name.substring(0,5)+"...";
    }
        if(isData){
        num = data.data[num].value
        }else{
        num = data.sort[num].value
        }
        num = (num-num%60)/60
        if(num<60){
        return name+'('+(num)+'min)';
        }else{
    return ' '+name+'('+(num-num%60)/60+'h'+(num%60)+'min)';}
        },
    },
    series: [
    {
            name: '时间占比',
            type: 'pie',
            selectedMode: 'single',
            radius: [0, '30%'],
            center: ['50%', 155],
            avoidLabelOverlap: true,
            label: {
                position: 'inner',
                formatter: function(params){
                if(params.name =="无"){
                return "默认"
                }else{
                if(params.name=="None"){
                return "Default"
                }else{
                return params.name}
                }
                }

            },
            labelLine: {
                show: false
            },
            data: data.sort
        },
     {
            name: '时间占比',
            type: 'pie',
            radius: ['45%', '60%'],
            center: ['50%', 155],
            label: {
                formatter: function(params){
               if (params.name.length > 12) {
                     name = params.name.substring(0,6)+"\n"+params.name.substring(6,12)+"\n"+params.name.substring(12,params.name.length);
                      }else if(params.name.length > 6){
                          name = params.name.substring(0,6)+"\n"+params.name.substring(6,params.name.length)}
                          else{
                              name = params.name
                          }
                num = params.value
                min = (num-num%60)/60
                if(min<60){
                return name + "\n"+min + "min"
                }else{
                hour = (min-min%60)/60
                return name + "\n"+ hour + "h"+min%60+"min"
                }
                },
            },
            labelLine:{
            length2:6
            },
            data: data.data,
            minShowLabelAngle:3.6,
     },
    ]

});

<!--    /*窗口自适应，关键代码*/-->
<!--	        	setTimeout(function (){-->
<!--	        	    window.onresize = function () {-->
<!--	        	    	//myChart.resize();-->
<!--	        	    }-->
<!--	        	},200)-->

}

</script>
</body>
</html>
